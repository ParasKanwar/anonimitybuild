(this.webpackJsonpanonimityrecreating=this.webpackJsonpanonimityrecreating||[]).push([[16],{728:function(e,t,n){"use strict";n.r(t);var a=n(16),i=n.n(a),r=n(29),o=n(33),c=n(82),s=n(51),l=n(287),u=n(119),d=n(0),p=n.n(d),m=n(50),h=n(863),f=n(39),b=n(80),g=n(15),y=n(712),v=n(865),E=n.n(v),O=n(40),j=n(836),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isLoading:!0},a.socket=void 0,a}return Object(s.a)(n,[{key:"componentWillUnmount",value:function(){this.socket.disconnect()}},{key:"componentDidMount",value:function(){var e=this;if(this.socket=E.a.connect("".concat(g.default)),this.props.isAuth)return this.setState({isLoading:!1});var t=localStorage.getItem("AnonymityToken#123");"false"!==t?Object(O.isAuthRequest)(t).then(function(){var n=Object(o.a)(i.a.mark((function n(a){var o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(200!==a.status){n.next=9;break}return n.next=3,a.json();case 3:return o=n.sent,o=Object(r.a)({},o,{token:t}),e.props.dispatch({type:"setUser",user:o}),e.props.dispatch({type:"auth"}),e.setState({isLoading:!1}),n.abrupt("return");case 9:e.setState({isLoading:!1});case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(t){e.setState({isLoading:!1})})):this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this;return p.a.createElement("div",null,p.a.createElement(h.a,{style:{zIndex:1e3},open:this.state.isLoading},p.a.createElement(f.a,{style:{color:"black",width:100,height:100,zIndex:100}})),this.props.isAuth?this.props.verified?p.a.createElement(this.props.Component,Object.assign({socket:this.socket},this.props)):p.a.createElement(j.default,{history:this.props.history,open:!0,email:this.props.email,dispatch:this.props.dispatch}):this.state.isLoading?"":p.a.createElement(y.a,{status:"403",title:"403",subTitle:"Sorry Not Authorize Please LogIn First",history:this.props.history,extra:p.a.createElement(b.a,{onClick:function(){e.props.history.push("/login")}},"Go To Log In Screen")}))}}]),n}(d.Component);t.default=Object(m.b)((function(e){return{isAuth:e.authReducer,email:e.userReducer.email,verified:e.userReducer.verified}}))(k)},836:function(e,t,n){"use strict";n.r(t),n.d(t,"TextStyle",(function(){return E}));var a=n(29),i=n(16),r=n.n(i),o=n(33),c=n(9),s=n(0),l=n.n(s),u=n(36),d=n(804),p=n.n(d),m=n(284),h=n(80),f=n(39),b=n(15),g=(n(872),n(40)),y=n(84),v=n.n(y),E={fontFamily:"poppins",fontWeight:"bold",color:"grey"},O=function(e,t){var n=new Headers;return n.append("Authorization",e),n.append("content-type","application/json"),fetch("".concat(b.default,"/user/sentotp/").concat(t),{method:"GET",headers:n})},j=function(e,t,n){var a=new Headers;return a.append("Authorization",e),a.append("content-type","application/json"),fetch("".concat(b.default,"/user/verifyotp/").concat(t,"/").concat(n),{method:"GET",headers:a})};t.default=function(e){var t=Object(s.useState)(!1),n=Object(c.a)(t,2),i=n[0],d=n[1],b=Object(s.useState)(!1),y=Object(c.a)(b,2),k=y[0],S=y[1],x=Object(s.useState)(e.email||""),w=Object(c.a)(x,2),T=w[0],A=w[1],C=Object(s.useState)(""),L=Object(c.a)(C,2),F=L[0],I=L[1],P=Object(s.useState)(!1),R=Object(c.a)(P,2),N=R[0],z=R[1],D=Object(s.useState)(!1),H=Object(c.a)(D,2),G=H[0],W=H[1],B=Object(s.useState)(10),J=Object(c.a)(B,2),M=J[0],U=J[1],V=Object(s.useState)(!1),q=Object(c.a)(V,2),K=q[0],Q=q[1];return l.a.createElement(s.Fragment,null,l.a.createElement(m.a,{onClose:function(){z(!1)},anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,open:N,ContentProps:{style:{fontFamily:"poppins",fontWeight:"bold"}},message:N}),l.a.createElement(u.a,{open:e.open,dimmer:"inverted"},l.a.createElement(u.a.Header,{style:Object(a.a)({},E)},"Verify Email..."),i?l.a.createElement(s.Fragment,null,l.a.createElement(u.a.Content,{style:Object(a.a)({},E)},l.a.createElement("div",{style:{margin:10}},(G?"Otp Has Already Been Generated For Email ----- ":"Otp Generated for ----- ")+T),l.a.createElement("input",{className:"mobField comingFromRightP5",placeholder:"Enter 6-Digit OTP",value:F,onChange:function(e){(p.a.isNumeric(e.target.value)&&e.target.value.length<7||""===e.target.value)&&I(e.target.value)}})),l.a.createElement(u.a.Content,null,l.a.createElement(h.a,{className:"comingFromRightP5",variant:"contained",color:"secondary",style:{width:200,color:"white",height:35},onClick:function(){!function(e,t,n){Q(!0),j(e,t,n).then((function(e){return e.ok?window.location.reload(!1):500===e.status?(z("Internal Server Error"),void Q(!1)):(Q(!1),z("Wrong OTP or OTP Expired"))})).catch((function(e){z("Internal Server Error")}))}(localStorage.getItem("AnonymityToken#123"),T,F)},disabled:6!==F.length},K?l.a.createElement(f.a,{style:{color:"white",width:10,height:10}}):"Verify Email"),l.a.createElement("div",{style:Object(a.a)({},E,{padding:20,cursor:"pointer",textAlign:"center",color:"grey"})},"To Resend OTP or Change Email Try Again After ",M," ","minutes..."))):l.a.createElement(s.Fragment,null,l.a.createElement(u.a.Content,{style:Object(a.a)({},E)},l.a.createElement("input",{placeholder:"Email",type:"text",className:"mobField comingFromLeftP5",value:T,disabled:k,style:{border:"invalid Email"===N?"0.5px solid red":"none",marginRight:"invalid Email"===N?10:0,transition:"0.5s",borderRadius:"invalid Email"===N?0:10},onChange:function(e){A(e.target.value)}}),"invalid Email"===N?"Invalid Email":""),l.a.createElement(u.a.Content,null,l.a.createElement(h.a,{variant:"outlined",className:"comingFromLeftP5",style:{width:200,color:"black",height:35},disabled:k||"invalid Email"===N,onClick:function(){if(!p.a.isEmail(T))return z("invalid Email");!function(e,t){S(!0),O(e,t).then(function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=3;break}return S(!1),e.abrupt("return",d(!0));case 3:if(403!==t.status){e.next=6;break}return z("Email Already Taken"),e.abrupt("return",S(!1));case 6:if(S(!1),409!==t.status){e.next=16;break}return d(!0),W(!0),e.next=12,t.json();case 12:n=e.sent,A(n.email),a=10-v()(new Date).diff(n.generatedAt,"minutes"),U(a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){S(!1),z("Error Sending OTP")}))}(localStorage.getItem("AnonymityToken#123"),T)}},k?l.a.createElement(f.a,{style:{color:"black",width:10,height:10,marginLeft:10}}):"Sent Otp"))),l.a.createElement(u.a.Actions,null,l.a.createElement(h.a,{color:"secondary",onClick:function(){e.history.push("/"),Object(g.logoutall)(),localStorage.setItem("AnonymityToken#123",null),e.dispatch({type:"notAuth"})}},"Log Out"))))}},863:function(e,t,n){"use strict";var a=n(1),i=n(6),r=n(0),o=(n(2),n(8)),c=n(11),s=n(864),l=r.forwardRef((function(e,t){var n=e.children,c=e.classes,l=e.className,u=e.invisible,d=void 0!==u&&u,p=e.open,m=e.transitionDuration,h=Object(i.a)(e,["children","classes","className","invisible","open","transitionDuration"]);return r.createElement(s.a,Object(a.a)({in:p,timeout:m},h),r.createElement("div",{className:Object(o.a)(c.root,l,d&&c.invisible),"aria-hidden":!0,ref:t},n))}));t.a=Object(c.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(l)},864:function(e,t,n){"use strict";var a=n(1),i=n(6),r=n(0),o=(n(2),n(454)),c=n(101),s=n(83),l=n(102),u=n(25),d={entering:{opacity:1},entered:{opacity:1}},p={enter:c.b.enteringScreen,exit:c.b.leavingScreen},m=r.forwardRef((function(e,t){var n=e.children,c=e.in,m=e.onEnter,h=e.onExit,f=e.style,b=e.timeout,g=void 0===b?p:b,y=Object(i.a)(e,["children","in","onEnter","onExit","style","timeout"]),v=Object(s.a)(),E=Object(u.a)(n.ref,t);return r.createElement(o.a,Object(a.a)({appear:!0,in:c,onEnter:function(e,t){Object(l.b)(e);var n=Object(l.a)({style:f,timeout:g},{mode:"enter"});e.style.webkitTransition=v.transitions.create("opacity",n),e.style.transition=v.transitions.create("opacity",n),m&&m(e,t)},onExit:function(e){var t=Object(l.a)({style:f,timeout:g},{mode:"exit"});e.style.webkitTransition=v.transitions.create("opacity",t),e.style.transition=v.transitions.create("opacity",t),h&&h(e)},timeout:g},y),(function(e,t){return r.cloneElement(n,Object(a.a)({style:Object(a.a)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},d[e],{},f,{},n.props.style),ref:E},t))}))}));t.a=m},872:function(e,t,n){},907:function(e,t){}}]);
//# sourceMappingURL=16.ad2f4cde.chunk.js.map